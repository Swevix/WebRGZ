{% extends 'cars/base.html' %}
{% block title %}{{ car.title }}{% endblock %}

{% block content %}
  <h2>{{ car.title }}</h2>
  <p>–¶–µ–Ω–∞: ${{ car.price }}</p>
  <div>{{ car.description|linebreaks }}</div>

  {# –ö–Ω–æ–ø–∫–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–≤—Ç–æ—Ä–∞ #}
  {% if user == car.author %}
    <p>
      <a href="{% url 'cars:edit_car' car.slug %}">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
      |
      <a href="{% url 'cars:delete_car' car.slug %}">üóë –£–¥–∞–ª–∏—Ç—å</a>
    </p>
  {% endif %}

  {# –õ–∞–π–∫/–¥–∏–∑–ª–∞–π–∫ #}
  <form method="post" action="{% url 'cars:car_like' car.slug %}">
    {% csrf_token %}
    <button type="submit">
      {% if user in car.likes.all %}
        üíñ {{ car.likes.count }}
      {% else %}
        ü§ç {{ car.likes.count }}
      {% endif %}
    </button>
  </form>

  <h3>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h3>
  <ul>
    {% for comment in comments %}
      <li>
        <strong>{{ comment.author.username }}</strong>:
        {{ comment.text }}
        <small>({{ comment.created|date:"Y-m-d H:i" }})</small>
      </li>
    {% endfor %}
  </ul>

  {% if user.is_authenticated %}
    <form method="post">
      {% csrf_token %}
      {{ comment_form.text }}
      {{ comment_form.text.errors }}
      <button type="submit">–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</button>
    </form>
  {% else %}
    <p><a href="{% url 'users:login' %}?next={{ request.path }}">–í–æ–π–¥–∏—Ç–µ</a>, —á—Ç–æ–±—ã –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.</p>
  {% endif %}
{% endblock %}